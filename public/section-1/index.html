<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>F1 Radar Chart</title>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

	<!-- D3.js -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>

	<style>
		body {
			margin: 0;
			font-family: 'Open Sans', sans-serif;
			background: #f0f4f8;
		}

		section {
			min-height: 100vh;
			padding: 40px;
			box-sizing: border-box;
		}

		#block1 {
			display: flex;
			justify-content: center;
			align-items: flex-start;
			padding-top: 80px;
		}

		.content-container {
			display: flex;
			flex-wrap: wrap;
			max-width: 1000px;
			width: 100%;
			align-items: flex-start;
		}

		.left-panel {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;   /* align from top */
            align-items: center;
        }


        .radar-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }



		.right-panel {
			flex: 1;
			min-width: 300px;
			padding-left: 40px;
			display: flex;
			align-items: flex-end;
		}

		.radarChart {
			width: 100%;
			height: 100%;
		}

		#radarPopup {
			width: 100%;
			background: #ffffff;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
			display: flex;
			flex-direction: column;
			align-items: center;
			height: auto;
            margin-top: 20px;
		}

		#popupImage {
			width: 100%;
			height: 220px;
			object-fit: fill;
			object-position: center;
			border-radius: 6px;
			/* margin-bottom: 15px; */
		}

		#popupTitle {
			text-align: center;
			border-top: 2px solid #ccc;
			padding-top: 10px;
			margin: 10px 0 20px;
			font-size: 20px;
			width: 100%;
		}

		.popup-main-info {
			display: flex;
			width: 100%;
			justify-content: space-between;
			/* gap: 24px; */
			flex-wrap: wrap;
		}

		.popup-stats-left {
			flex: 0 0 160px;
		}

		.popup-stats-left p {
			margin: 6px 0;
			font-size: 14px;
		}

		.popup-meta-right {
			flex: 1;
		}

		.popup-meta {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 16px;
		}

		.popup-meta-item {
			background: #f9f9f9;
			padding: 12px 16px;
			border-radius: 12px;
			box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
		}

		.popup-meta-title {
			font-size: 13px;
			color: #666;
			margin-bottom: 4px;
			font-weight: 500;
		}

		.popup-meta-value {
			font-size: 18px;
			font-weight: 700;
		}

		.popup-meta-item.full-width {
			grid-column: span 2;
		}

        .chart-description {
            width: 100%;
            margin-bottom: 20px;
            text-align: left;
        }

        .chart-description h3 {
            margin: 0 0 8px;
            font-size: 18px;
            font-weight: 600;
        }

        .chart-description p {
            margin: 0;
            font-size: 14px;
            color: #555;
            line-height: 1.4;
        }

	</style>
</head>

<body>

<!-- Block 1: Radar Chart + Popup -->
<section id="block1">
	<div class="content-container">
        <div class="chart-description">
            <h3>Comparative Circuit Analysis: Albert Park’s High Incident Rate Revealed</h3>
            <p>The Albert Park Circuit ranks among Formula 1's most unpredictable track, trailing only
                Monaco in total incidents since 1996. The statistics reveal Albert Park's particular dangers: 51
                collisions demonstrate its overtaking difficulties, 12 spins indicate corner instability, while 19
                accidents expose the consequences of its demanding braking zones and uneven surface.</p>
        </div>
		<div class="left-panel">
            <div class="radar-wrapper">
                <h4 class="radar-title">Incident Type</h4>
                <div class="radarChart"></div>
            </div>
        </div>              
		<div class="right-panel">
			<div id="radarPopup">
				<img id="popupImage" src="images/formula1.jpg" alt="Circuit Image" />
				<h3 id="popupTitle">Race Information</h3>

				<div class="popup-main-info">
					<div class="popup-stats-left" id="popupContent">
						<p><strong>Accident:</strong> –</p>
						<p><strong>Collision:</strong> –</p>
						<p><strong>Spun Off:</strong> –</p>
					</div>
					<div class="popup-meta-right" id="popupMeta">
						<!-- Injected by JS -->
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<!-- Scripts -->
<script src="radarChart.js"></script>
<script>
	const margin = { top: 60, right: 60, bottom: 60, left: 60 },
		width = 350,
		height = 350;

	const data = [
		{ name: "Monaco Grand Prix", values: [
			{ axis: "Accident", value: 37 },
			{ axis: "Collision", value: 40 },
			{ axis: "Spun Off", value: 30 }
		]},
		{ name: "Australian Grand Prix", values: [
			{ axis: "Accident", value: 19 },
			{ axis: "Collision", value: 51 },
			{ axis: "Spun Off", value: 12 }
		]},
		{ name: "German Grand Prix", values: [
			{ axis: "Accident", value: 19 },
			{ axis: "Collision", value: 37 },
			{ axis: "Spun Off", value: 25 }
		]},
		{ name: "Belgian Grand Prix", values: [
			{ axis: "Accident", value: 14 },
			{ axis: "Collision", value: 40 },
			{ axis: "Spun Off", value: 14 }
		]},
		{ name: "Canadian Grand Prix", values: [
			{ axis: "Accident", value: 27 },
			{ axis: "Collision", value: 29 },
			{ axis: "Spun Off", value: 16 }
		]}
	];

	const radarChartOptions = {
		w: width,
		h: height,
		margin: margin,
		levels: 5,
		roundStrokes: true
	};

	RadarChart(".radarChart", data, radarChartOptions);
</script>

<script src="radarInteraction.js"></script>
<script>
	bindRadarPopup(data);
    showRadarPopup(data[0].name, data[0].values);
</script>

<script src="radarLabel.js"></script>
<script>
	bindRadarLabels(data); // after RadarChart() is called
</script>


</body>
</html>
